# 4. Realiza una aplicación en la que el usuario pueda programar una cuenta atrás que al terminar muestre un mensaje en la pantalla principal. Además, se mostrará en una barra de progreso el transcurso de dicha cuenta atrás (vaciando la barra de progreso)



```java
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class CuentaRegresiva extends JFrame {
    private JProgressBar barraProgreso;
    private JLabel labelTiempo;
    private JTextField campoTiempo;
    private JButton botonIniciar;
    private JLabel labelMensaje;
    private Timer timer;
    private int tiempoRestante;
    private int tiempoTotal;

    public CuentaRegresiva() {
        // Configuración de la ventana principal
        setTitle("Cuenta Regresiva");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(new BorderLayout(10, 10));
        setSize(400, 200);
        setLocationRelativeTo(null);

        // Panel superior para la entrada de tiempo
        JPanel panelSuperior = new JPanel();
        panelSuperior.add(new JLabel("Tiempo (segundos):"));
        campoTiempo = new JTextField(5);
        panelSuperior.add(campoTiempo);
        botonIniciar = new JButton("Iniciar");
        panelSuperior.add(botonIniciar);
        add(panelSuperior, BorderLayout.NORTH);

        // Panel central para la barra de progreso y el tiempo
        JPanel panelCentral = new JPanel(new GridLayout(2, 1, 5, 5));
        barraProgreso = new JProgressBar(0, 100);
        barraProgreso.setStringPainted(true);
        panelCentral.add(barraProgreso);
        
        labelTiempo = new JLabel("Tiempo restante: 0 segundos", SwingConstants.CENTER);
        panelCentral.add(labelTiempo);
        add(panelCentral, BorderLayout.CENTER);

        // Panel inferior para el mensaje final
        labelMensaje = new JLabel("", SwingConstants.CENTER);
        labelMensaje.setFont(new Font("Arial", Font.BOLD, 16));
        add(labelMensaje, BorderLayout.SOUTH);

        // Configuración del botón Iniciar
        botonIniciar.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                iniciarCuentaRegresiva();
            }
        });
    }

    private void iniciarCuentaRegresiva() {
        try {
            tiempoTotal = Integer.parseInt(campoTiempo.getText());
            if (tiempoTotal <= 0) {
                JOptionPane.showMessageDialog(this, 
                    "Por favor, ingrese un tiempo válido mayor a 0", 
                    "Error", 
                    JOptionPane.ERROR_MESSAGE);
                return;
            }

            // Reiniciar componentes
            tiempoRestante = tiempoTotal;
            barraProgreso.setValue(100);
            labelMensaje.setText("");
            botonIniciar.setEnabled(false);
            campoTiempo.setEnabled(false);

            // Crear y configurar el timer
            if (timer != null && timer.isRunning()) {
                timer.stop();
            }

            timer = new Timer(1000, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    actualizarCuentaRegresiva();
                }
            });
            timer.start();

        } catch (NumberFormatException ex) {
            JOptionPane.showMessageDialog(this, 
                "Por favor, ingrese un número válido", 
                "Error", 
                JOptionPane.ERROR_MESSAGE);
        }
    }

    private void actualizarCuentaRegresiva() {
        if (tiempoRestante > 0) {
            tiempoRestante--;
            double porcentaje = ((double) tiempoRestante / tiempoTotal) * 100;
            barraProgreso.setValue((int) porcentaje);
            labelTiempo.setText("Tiempo restante: " + tiempoRestante + " segundos");
        } else {
            timer.stop();
            labelMensaje.setText("¡Cuenta regresiva finalizada!");
            barraProgreso.setValue(0);
            botonIniciar.setEnabled(true);
            campoTiempo.setEnabled(true);

            // Reproducir un sonido de sistema
            Toolkit.getDefaultToolkit().beep();

            // Mostrar notificación
            JOptionPane.showMessageDialog(this, 
                "¡La cuenta regresiva ha terminado!", 
                "Finalizado", 
                JOptionPane.INFORMATION_MESSAGE);
        }
    }

    public static void main(String[] args) {
        // Ejecutar la aplicación en el Event Dispatch Thread
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new CuentaRegresiva().setVisible(true);
            }
        });
    }
}

```

Esta aplicación incluye las siguientes características:

1. Interfaz gráfica con:
   - Campo para ingresar el tiempo en segundos
   - Botón para iniciar la cuenta regresiva
   - Barra de progreso que se va vaciando
   - Etiqueta que muestra el tiempo restante
   - Mensaje final cuando termina la cuenta

2. Funcionalidades:
   - Validación de entrada de tiempo
   - Actualización en tiempo real de la barra de progreso
   - Deshabilitación de controles durante la cuenta regresiva
   - Sonido y mensaje de notificación al finalizar
   - La barra se vacía gradualmente conforme avanza el tiempo

3. Manejo de errores:
   - Validación de números negativos
   - Validación de entrada no numérica
   - Manejo de múltiples inicios

Para usar la aplicación:
1. Ejecuta la clase `CuentaRegresiva`
2. Ingresa el tiempo deseado en segundos
3. Presiona el botón "Iniciar"
4. La barra de progreso se irá vaciando hasta llegar a cero
5. Al finalizar, se mostrará un mensaje y sonará una notificación

¿Te gustaría que modifique algún aspecto de la aplicación? Por ejemplo:
- Cambiar el diseño de la interfaz
- Agregar más opciones de configuración
- Modificar el comportamiento de la barra de progreso
- Agregar la opción de pausar/reanudar la cuenta regresiva