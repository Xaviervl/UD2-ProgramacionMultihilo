# 3. Carrera de coches
Realiza una aplicación que simule una carrera de coches (de hasta 4 coches). Para cada coche se podrá configurar su velocidad y en la aplicación podremos configurar la distancia del circuito. Una vez lanzada la carrera se irá mostrando por pantalla (mediante barras de progreso, por ejemplo) el desarrollo de la misma (el avance de cada coche en el tiempo). Al final de la carrera se anunciará el coche ganador y los demás se detendrán mostrando cuánta distancia han recorrido



```java
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

class Coche implements Runnable {
    private String nombre;
    private int velocidad; // metros por segundo
    private int distanciaRecorrida;
    private final int distanciaTotal;
    private boolean carreraTerminada;
    private static boolean hayGanador = false;
    
    public Coche(String nombre, int velocidad, int distanciaTotal) {
        this.nombre = nombre;
        this.velocidad = velocidad;
        this.distanciaTotal = distanciaTotal;
        this.distanciaRecorrida = 0;
        this.carreraTerminada = false;
    }
    
    @Override
    public void run() {
        while (!carreraTerminada && distanciaRecorrida < distanciaTotal) {
            try {
                Thread.sleep(1000); // Actualización cada segundo
                avanzar();
                mostrarProgreso();
                
                if (distanciaRecorrida >= distanciaTotal && !hayGanador) {
                    hayGanador = true;
                    System.out.println("\n¡" + nombre + " ha ganado la carrera!");
                }
                
                if (hayGanador) {
                    carreraTerminada = true;
                }
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
                break;
            }
        }
        
        if (!hayGanador) {
            System.out.println("\n" + nombre + " ha recorrido " + distanciaRecorrida + " metros");
        }
    }
    
    private void avanzar() {
        distanciaRecorrida += velocidad;
        if (distanciaRecorrida > distanciaTotal) {
            distanciaRecorrida = distanciaTotal;
        }
    }
    
    private void mostrarProgreso() {
        int porcentaje = (distanciaRecorrida * 100) / distanciaTotal;
        int barraLongitud = 20;
        int progreso = (porcentaje * barraLongitud) / 100;
        
        StringBuilder barra = new StringBuilder("\r" + nombre + " [");
        for (int i = 0; i < barraLongitud; i++) {
            if (i < progreso) {
                barra.append("=");
            } else if (i == progreso) {
                barra.append(">");
            } else {
                barra.append(" ");
            }
        }
        barra.append("] ").append(porcentaje).append("%");
        
        System.out.println(barra);
    }
}

public class CarreraCoches {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        List<Thread> hilosCoches = new ArrayList<>();
        
        // Configuración de la carrera
        System.out.print("Introduce la distancia del circuito (metros): ");
        int distanciaCircuito = scanner.nextInt();
        
        System.out.print("Introduce el número de coches (máximo 4): ");
        int numCoches = Math.min(scanner.nextInt(), 4);
        
        // Configuración de cada coche
        for (int i = 0; i < numCoches; i++) {
            System.out.print("Introduce la velocidad del coche " + (i + 1) + " (metros/segundo): ");
            int velocidad = scanner.nextInt();
            
            Coche coche = new Coche("Coche " + (i + 1), velocidad, distanciaCircuito);
            Thread hiloCoche = new Thread(coche);
            hilosCoches.add(hiloCoche);
        }
        
        System.out.println("\n¡Comienza la carrera!");
        System.out.println("===================");
        
        // Iniciar la carrera
        for (Thread hilo : hilosCoches) {
            hilo.start();
        }
        
        // Esperar a que todos los coches terminen
        for (Thread hilo : hilosCoches) {
            try {
                hilo.join();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        
        System.out.println("\n¡Carrera finalizada!");
        scanner.close();
    }
}

```

Este programa implementa una carrera de coches con las siguientes características:

1. Permite configurar:
    - La distancia total del circuito
    - El número de coches (máximo 4)
    - La velocidad de cada coche

2. Cada coche es un hilo independiente que:
    - Avanza según su velocidad
    - Muestra una barra de progreso en tiempo real
    - Se actualiza cada segundo

3. La visualización incluye:
    - Barras de progreso usando caracteres ASCII
    - Porcentaje completado para cada coche
    - Anuncio del ganador

4. Cuando un coche gana:
    - Se anuncia el ganador
    - Los demás coches se detienen
    - Se muestra la distancia recorrida por cada coche

Para usar el programa:
1. Ejecuta la clase `CarreraCoches`
2. Introduce la distancia del circuito
3. Introduce el número de coches (1-4)
4. Para cada coche, introduce su velocidad
5. La carrera comenzará automáticamente

La salida se verá algo así:
```
Coche 1 [=========>          ] 45%
Coche 2 [============>       ] 60%
Coche 3 [=======>            ] 35%
Coche 4 [===========>        ] 55%
```
